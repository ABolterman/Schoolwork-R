---
title: "Stat 305 Lecture 3 ggplot2 Part 2 Exercises: Facets and Geometric Objects, with Modifications by Thomas Fiore"
author: "Solutions by Abigail Bolterman"
date: "2022/09/15"
output:
  pdf_document: default
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

## External Requirements

```{r warning=FALSE, message=FALSE}
# load the library ggplot2 here
library(ggplot2)
```


## Exercises

**1) First let's review scatterplots (without facets). In the previous assignment, you looked at the `diamonds` dataset, and created a scatterplot of `price` against `weight`, color-coded by the categorical variable `cut`. Copy and paste the code for that scatterplot below. **

**Then make two more versions of this scatterplot, one color-coded by the categorical variable `color`, the other color-coded by the categorical variable `clarity`. **

**Interpret the second and third graph to explain the relationship between price and weight based on `color` and `clarity`. Hint: you do need to look at the documentation to determine which level is worst and which is best.**


```{r fig.width=6, fig.height=4}
# paste here the scatterplot of price versus weight color-coded by cut, from last time. 

# read it again to memorize the code
ggplot(data=diamonds) + 
  geom_point(mapping = aes(x=carat, y=price, color=cut)) +
  ggtitle('Scatterplot of Price against Weight') +
  xlab('Weight in Carats') +
  ylab('Price in US Dollars')

```

```{r fig.width=6, fig.height=4}
# color code the previous scatterplot by the variable color
ggplot(data=diamonds) + 
  geom_point(mapping = aes(x=carat, y=price, color=color)) +
  ggtitle('Scatterplot of Price against Weight') +
  xlab('Weight in Carats') +
  ylab('Price in US Dollars')
```

Interpretation:  For a fixed weight, the better the color of the diamond, the more the diamond will sell for, which makes since as they would be more appealing to buyers. Interestingly, the color gets worse as weight increases. I don't really know enough about diamonds to know why this is, but one factor might be that the diamonds are being cut to show the best color, so they end up smaller.

```{r fig.width=6, fig.height=4}
# color code the previous scatterplot by clarity
ggplot(data=diamonds) + 
  geom_point(mapping = aes(x=carat, y=price, color=clarity)) +
  ggtitle('Scatterplot of Price against Weight') +
  xlab('Weight in Carats') +
  ylab('Price in US Dollars')
```

Interpretation: As clarity increases, price increases, even for diamonds of the same weight. Like with color, as the weight increases, clarity decreases. I imagine the reason why is similar to why it's true with color - that the diamonds are being cut to show the best clarity and are therefore smaller.


**2) Let's explore this third scatterplot a little more, the one color-coded by `clarity`. There are over 50,000 points here, so there is a lot of overlap and we can't see some points that are covered by others. So let's split this scatterplot into 8 different scatterplots, each showing only the points of a different `clarity` level. Each of these suplots is called a facet, we also say that we "facet the scatterplot by the categorical variable `clarity`". Let's also keep the color-coding by `clarity` so that the correspondence between the facets and the original scatterplot is apparent.**

**Make four rows of facets. To do this, just copy and paste the above scatterplot code and add on `facet_wrap` with four rows. Make the title be "Scatterplot of Price against Weight, Faceted by Clarity". Also decrease the point size from the default 1.5 down to .5 so that we can distinguish points better, write `size=.5` inside of `geom_point()` but outside of `aes`. **

```{r}
ggplot(data=diamonds) + 
  geom_point(mapping = aes(x=carat, y=price, color=clarity), size=.5) +
  ggtitle('Scatterplot of Price against Weight, Faceted by Clarity') +
  xlab('Weight in Carats') +
  ylab('Price in US Dollars') +
  facet_wrap(~clarity, nrow=4)
```


**Notice that now we can see much more, the points aren't covered up. What can you say about the pattern of `I1` clarity as compared to the others?**

Answer: The pattern of I1 clarity is a gentler slope than the others. They are generally worth less than the others, but get much larger as well.

**3) Facetting on a continuous variable is not useful. Look at the documentation of the `diamonds` data set, select a continuous variable, and facet the previous scatterplot on the continuous variable. Why is it not useful?**

```{r}
ggplot(data=diamonds) + 
  geom_point(mapping = aes(x=carat, y=price)) +
  ggtitle('Scatterplot of Price against Weight, Faceted for Depth') +
  xlab('Weight in Carats') +
  ylab('Price in US Dollars')+
  facet_wrap(~depth)
```


Answer: It needs to make a facet for each outcome, of which there is too many, so you can't see the plots and it's useless.

**4) We can store a ggplot to a variable, and then add onto it. Let's use that to explore facetting with two variables, and to explore using "." to facet on one variable in a specified direction.**  

```{r}
g <- ggplot(data=diamonds) +
  geom_point(mapping = aes(x=carat, y=price), size=.5)

# facet on two categorical variables cut and clarity
# uncomment next line and write your addition
g + facet_grid(cut ~ clarity)

# facet on one variable but use .
g + facet_grid(cut~.)

# facet on one variable but use .
g + facet_grid(. ~ clarity)
```

**Using the first plot (two facetting variables), explain in this example what an individual scattersubplot means when we facet by two categorical variables. In the first graph point out what a particular scattersubplot means.** 

Answer: When we facet by two categorical variables, each scattersubplot contains the data the fits into the certain categorty for each of those variables, so the top left are the diamonds that have I1 clarity and whose cut is fair.

**Explain in this example what "." is doing.**

Answer: Depending on where the "." goes in relation to the "~", the orientation of the scatterplot changes: "variable ~ ." makes it horizontal, ". ~ variable" makes it vertical.

**5) Without typing `g` from the previous exercise, facet the scatterplot of `price` versus `carat` using the two categorical variables `cut` and `clarity` simultaneously, and map `color` to `color` at the same time. Interpret the resulting graph.**

```{r}
ggplot(data=diamonds) +
  ggtitle("Scatterplot of Price vs Carat, Faceted by Cut and Clarity") +
  geom_point(mapping = aes(x=carat, y=price, color=color), size=.5) +
  facet_grid(cut ~ clarity)
```

Answer: There are very few low cut quality diamonds and few low clarity diamonds comparatively, and those of low cut are likelier to be low clarity. Lower color quality diamonds seem more prevalent in diamonds of middling clarity quality, those in the SI1, VS2, and VS1 categories. 

**6) Let's look again at the `mpg` dataframe. What does the argument `se` of `geom_smooth` do? Run the code below, and copy and paste it and remove `se=false` and compare the output. Then in the console type `?geom_smooth` and consult the documentation to figure out what the argument `se` of `geom_smooth` does.**

```{r message=FALSE}
ggplot(mpg,aes(x=displ,y=hwy,color=drv)) +
  geom_point() + 
  geom_smooth(se=FALSE)
```

```{r}
ggplot(mpg,aes(x=displ,y=hwy,color=drv)) +
  geom_point() + 
  geom_smooth()
```

Answer: "se" shows gray shading around the geom_smooth line, which the help documentation says to signify the confidence interval around smooth.

